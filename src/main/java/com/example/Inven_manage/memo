## ë¯¸ì…˜Â 5. ğŸ“¦ ì¬ê³  ê´€ë¦¬ ì‹œìŠ¤í…œ

- **ì„œë¹„ìŠ¤**: ì œí’ˆê³¼ ì°½ê³ ë¥¼ ë“±ë¡í•˜ê³  ê° ì°½ê³ ì— ìˆëŠ” ì¬ê³  í˜„í™©ì„ ê´€ë¦¬
- **ì£¼ìš” ê¸°ëŠ¥**: ì œí’ˆ/ì°½ê³ /ì¬ê³  CRUD, ì¬ê³  ëŒ€ì‹œë³´ë“œ
- **í•™ìŠµ í¬ì¸íŠ¸**:
    - ë³µí•© JOINì„ í†µí•œ ë‹¤ì¤‘ í…Œì´ë¸” ì¡°íšŒ
    - ì œí’ˆ â†” ì°½ê³  â†” ì¬ê³  ê°„ ê´€ê³„ ì„¤ì •
    - ìˆ˜ëŸ‰ ê°±ì‹ , ì°½ê³  ì¬ê³  ì´ë™ ì²˜ë¦¬
    - ê¸ˆì•¡(`NUMERIC`) ë°ì´í„° ì²˜ë¦¬ ë° í˜•ì‹ ì¶œë ¥

### êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥

- **ì œí’ˆ ëª©ë¡ ì¡°íšŒ**Â `GETÂ /products`
- **ì°½ê³  ëª©ë¡ ì¡°íšŒ**Â `GETÂ /warehouses`
- **ì œí’ˆ ìƒì„±/ìˆ˜ì •/ì‚­ì œ**Â `POSTÂ /products`Â /Â `POSTÂ /products/{id}/edit`Â /Â `POSTÂ /products/{id}/delete`
- **ì°½ê³  ìƒì„±/ìˆ˜ì •/ì‚­ì œ**Â `POSTÂ /warehouses`Â /Â `POSTÂ /warehouses/{id}/edit`Â /Â `POSTÂ /warehouses/{id}/delete`
- **ì¬ê³  í˜„í™© ì¡°íšŒ**Â `GETÂ /stocks`Â (ì œí’ˆë³„Â·ì°½ê³ ë³„ ìˆ˜ëŸ‰)
- **ì¬ê³  ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ**Â `POSTÂ /stocks/add`Â /Â `POSTÂ /stocks/{id}/edit`Â /Â `POSTÂ /stocks/{id}/delete`

### ì „ì²´ SQL ì¿¼ë¦¬

```sql
-- 1) í…Œì´ë¸” ìƒì„±
CREATE TABLE products (
  id    SERIAL PRIMARY KEY,
  name  VARCHAR(200) NOT NULL,
  price NUMERIC(10,2) NOT NULL
);

CREATE TABLE warehouses (
  id       SERIAL PRIMARY KEY,
  name     VARCHAR(100) NOT NULL,
  location VARCHAR(200)
);

CREATE TABLE stocks (
  id            SERIAL PRIMARY KEY,
  product_id    INT NOT NULL REFERENCES products(id) ON DELETE CASCADE,
  warehouse_id  INT NOT NULL REFERENCES warehouses(id) ON DELETE CASCADE,
  quantity      INT NOT NULL DEFAULT 0
);

-- 2) ì œí’ˆÂ·ì°½ê³ ë³„ ì¬ê³  ìš”ì•½ ë·°
CREATE VIEW product_stock_summary AS
SELECT
  p.id            AS product_id,
  p.name          AS product_name,
  w.id            AS warehouse_id,
  w.name          AS warehouse_name,
  s.quantity
FROM stocks s
JOIN products p   ON p.id = s.product_id
JOIN warehouses w ON w.id = s.warehouse_id
ORDER BY p.id, w.id;

-- 3) CRUD: Products
INSERT INTO products (name, price)
  VALUES ('ë…¸íŠ¸ë¶', 1200000);
SELECT * FROM products;
SELECT * FROM products WHERE id = :id;
UPDATE products SET price = 1100000 WHERE id = :id;
DELETE FROM products WHERE id = :id;

-- 4) CRUD: Warehouses
INSERT INTO warehouses (name, location)
  VALUES ('ë³¸ì‚¬ ì°½ê³ ', 'ì„œìš¸ ê°•ë‚¨êµ¬');
SELECT * FROM warehouses;
SELECT * FROM warehouses WHERE id = :id;
UPDATE warehouses SET location = 'ì„œìš¸ ë§ˆí¬êµ¬' WHERE id = :id;
DELETE FROM warehouses WHERE id = :id;

-- 5) CRUD: Stocks
INSERT INTO stocks (product_id, warehouse_id, quantity)
  VALUES (1, 1, 50);
SELECT * FROM stocks;
SELECT * FROM stocks WHERE id = :id;
UPDATE stocks SET quantity = 75 WHERE id = :id;
DELETE FROM stocks WHERE id = :id;
```